<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المنصة التعليمية المتطورة - نظام الإدارة المتكامل</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="/socket.io/socket.io.js"></script>
    <style>
        :root {
            --primary: #2c5aa0;
            --primary-dark: #1e3d72;
            --primary-light: #4a7bc8;
            --secondary: #00b4d8;
            --accent: #ff6b6b;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --dark: #2d3748;
            --light: #f8f9fa;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 6px 10px -1px rgba(0, 0, 0, 0.1), 0 4px 6px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --gradient-primary: linear-gradient(135deg, var(--primary), var(--primary-light));
            --gradient-secondary: linear-gradient(135deg, var(--secondary), #0099cc);
            --gradient-accent: linear-gradient(135deg, var(--accent), #ff5252);
            --gradient-success: linear-gradient(135deg, var(--success), #20c997);
            --story-gradient: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            --group-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --channel-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --sidebar-width: 280px;
            --header-height: 70px;
            --border-radius: 12px;
            --border-radius-lg: 16px;
            --border-radius-xl: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s ease;
            --backdrop-blur: blur(12px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* تحسينات التمرير */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-100);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
            transition: var(--transition);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* تحسينات التصميم العامة */
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .connection-status {
            position: fixed;
            top: 15px;
            left: 15px;
            background: var(--success);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 10000;
            display: none;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-lg);
            backdrop-filter: var(--backdrop-blur);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }
        
        .connection-status.offline {
            background: var(--danger);
            animation: pulse 2s infinite;
        }

        .connection-status.reconnecting {
            background: var(--warning);
            color: var(--dark);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* تحسينات الهيدر */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: var(--backdrop-blur);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border);
            height: var(--header-height);
            transition: var(--transition);
        }

        .header.scrolled {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            gap: 1.5rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-shrink: 0;
            text-decoration: none;
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-1px);
        }

        .logo-icon {
            width: 42px;
            height: 42px;
            background: var(--gradient-primary);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .logo:hover .logo-icon {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .logo-text {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary);
            letter-spacing: -0.5px;
        }

        .logo-subtitle {
            font-size: 0.75rem;
            color: var(--gray-600);
            font-weight: 500;
            margin-top: -2px;
        }

        /* تحسينات التنقل */
        .nav {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-item {
            color: var(--dark);
            text-decoration: none;
            font-weight: 600;
            padding: 0.6rem 1.2rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            background: var(--gradient-primary);
            transition: var(--transition);
            z-index: -1;
        }

        .nav-item:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .nav-item:hover::before {
            width: 100%;
        }

        .nav-item.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow);
        }

        .nav-item.hidden {
            display: none;
        }

        .nav-item-badge {
            background: var(--accent);
            color: white;
            border-radius: 10px;
            padding: 0.2rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 700;
            min-width: 20px;
            text-align: center;
        }

        /* تحسينات معلومات المستخدم */
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            background: var(--gray-100);
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: var(--transition);
            border: 1px solid var(--border);
        }

        .user-info:hover {
            background: var(--gray-200);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            border: 2px solid white;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .user-name {
            font-weight: 700;
            color: var(--dark);
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--gray-600);
            font-weight: 500;
        }

        /* تحسينات المحتوى الرئيسي */
        .main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
            min-height: 60vh;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* تحسينات الصفحات */
        .hero-section {
            padding: 3rem 0;
            text-align: center;
        }
        
        .hero-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-description {
            font-size: 1.2rem;
            color: var(--gray-600);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 4rem;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }
        
        /* تحسينات صفحات المصادقة */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70vh;
            padding: 2rem;
        }
        
        .auth-card {
            background: white;
            padding: 3rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 450px;
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .auth-header h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }
        
        .auth-footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }
        
        /* تحسينات لوحة التحكم */
        .dashboard-header {
            margin-bottom: 2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        .stat-info h3 {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .content-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
        }
        
        /* تحسينات الأزرار */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-block {
            width: 100%;
            justify-content: center;
        }
        
        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* تحسينات شاشة الترحيب */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .welcome-content {
            text-align: center;
            max-width: 500px;
            padding: 2rem;
        }

        .welcome-logo .logo-icon.large {
            width: 100px;
            height: 100px;
            font-size: 3rem;
            margin: 0 auto 1.5rem;
        }

        .welcome-logo h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
        }

        .welcome-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .feature i {
            font-size: 2rem;
            opacity: 0.9;
        }

        /* تحسينات شريط الأدوات السريع */
        .quick-actions-bar {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            padding: 1rem;
            display: none;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 1000;
            animation: slideInUp 0.3s ease-out;
        }
        
        .quick-actions-bar.active {
            display: flex;
        }
        
        .quick-action {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .quick-action:hover {
            background: var(--gray-100);
        }
        
        .quick-action i {
            width: 20px;
            text-align: center;
            color: var(--primary);
        }

        /* تحسينات الزر العائم */
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-2xl);
        }

        /* تحسينات إشعار التحديث */
        .update-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-xl);
            z-index: 5000;
            display: none;
            align-items: center;
            gap: 1rem;
            border-right: 4px solid var(--info);
            animation: slideInDown 0.3s ease-out;
        }
        
        .update-notification.active {
            display: flex;
        }
        
        .update-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }
        
        .update-info {
            flex: 1;
        }
        
        .update-info strong {
            display: block;
            margin-bottom: 0.25rem;
        }
        
        .update-info span {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px) translateX(-50%);
            }
            to {
                opacity: 1;
                transform: translateY(0) translateX(-50%);
            }
        }

        /* تحسينات قائمة النشاط */
        .activity-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .activity-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            background: var(--gray-100);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }
        
        .activity-content {
            flex: 1;
        }
        
        .activity-content p {
            margin: 0;
            font-weight: 500;
        }
        
        .activity-time {
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        /* تحسينات قائمة المستخدمين */
        .users-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .user-list-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-list-item:last-child {
            border-bottom: none;
        }
        
        .user-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
        }
        
        .user-status.offline {
            background: var(--gray-400);
        }

        /* تحسينات الدردشة */
        .chat-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            height: 70vh;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .chat-sidebar {
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-search {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .chat-search input {
            width: 100%;
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            border-radius: 20px;
        }
        
        .conversations-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .chat-main {
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }
        
        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .chat-input-tools {
            display: flex;
            gap: 0.5rem;
        }
        
        .chat-tool-btn {
            background: none;
            border: none;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            color: var(--gray-600);
            cursor: pointer;
        }
        
        .chat-input-container input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 25px;
        }

        /* تحسينات الـ Stories */
        .stories-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .stories-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stories-feed {
            padding: 1.5rem;
        }
        
        .stories-carousel {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }
        
        .story-user {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            min-width: 80px;
        }
        
        .story-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            border: 3px solid var(--primary);
            position: relative;
        }
        
        .story-avatar.has-story {
            border-color: var(--accent);
        }
        
        .story-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .story-username {
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
        }
        
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .story-card {
            background: var(--gray-100);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .story-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .story-media {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .story-content {
            padding: 1rem;
        }
        
        .story-user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .story-caption {
            font-size: 0.9rem;
            color: var(--gray-700);
            line-height: 1.4;
        }
        
        .story-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--gray-600);
        }
        
        /* تحسينات الإعدادات */
        .settings-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .settings-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .settings-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: var(--gray-100);
        }
        
        .tab-btn {
            padding: 1rem 2rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }
        
        .tab-btn.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            background: white;
        }
        
        .settings-panels {
            padding: 2rem;
        }
        
        .tab-panel {
            display: none;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        .profile-settings {
            max-width: 600px;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }
        
        .profile-avatar {
            text-align: center;
        }
        
        .avatar-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin-bottom: 1rem;
            border: 4px solid white;
            box-shadow: var(--shadow);
        }
        
        .avatar-preview img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .settings-form {
            max-width: 500px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .privacy-options,
        .notification-options {
            max-width: 600px;
        }
        
        .privacy-option,
        .notification-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }
        
        .option-info h4 {
            margin: 0 0 0.5rem 0;
            color: var(--dark);
        }
        
        .option-info p {
            margin: 0;
            color: var(--gray-600);
            font-size: 0.9rem;
        }
        
        /* تحسينات Switches */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-300);
            transition: var(--transition);
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* تحسينات المظهر */
        .appearance-options {
            max-width: 600px;
        }
        
        .appearance-option {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
        }
        
        .theme-selector,
        .background-selector {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .theme-option,
        .background-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .theme-option.active,
        .background-option.active {
            background: var(--gray-100);
            border: 2px solid var(--primary);
        }
        
        .theme-preview {
            width: 60px;
            height: 60px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border);
        }
        
        .light-theme {
            background: white;
        }
        
        .dark-theme {
            background: var(--dark);
        }
        
        .auto-theme {
            background: linear-gradient(135deg, white 50%, var(--dark) 50%);
        }
        
        .background-preview {
            width: 80px;
            height: 60px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border);
        }
        
        .bg-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .bg-solid {
            background: var(--primary);
        }
        
        .bg-pattern {
            background: 
                linear-gradient(135deg, #667eea 0%, #764ba2 100%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><rect width="20" height="20" fill="rgba(255,255,255,0.1)"/></svg>');
            background-blend-mode: overlay;
        }

        /* تحسينات الصور المرسلة */
        .photos-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .photos-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            padding: 1.5rem;
        }
        
        .photo-item {
            position: relative;
            border-radius: var(--border-radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            aspect-ratio: 1;
        }
        
        .photo-item:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            padding: 1rem;
            color: white;
            transform: translateY(100%);
            transition: var(--transition);
        }
        
        .photo-item:hover .photo-overlay {
            transform: translateY(0);
        }
        
        .photo-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .photo-sender {
            font-weight: 600;
        }
        
        .photo-date {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* تحسينات التقويم */
        .calendar-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .calendar-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .calendar-grid {
            padding: 1.5rem;
        }
        
        .calendar-month {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--gray-600);
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .calendar-day:hover {
            background: var(--gray-100);
        }
        
        .calendar-day.other-month {
            color: var(--gray-400);
        }
        
        .calendar-day.today {
            background: var(--primary);
            color: white;
        }
        
        .calendar-day.has-event {
            position: relative;
        }
        
        .calendar-day.has-event::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: var(--accent);
            border-radius: 50%;
        }
        
        .calendar-events {
            margin-top: 2rem;
        }
        
        .event-item {
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .event-time {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            min-width: 100px;
            text-align: center;
        }
        
        .event-details {
            flex: 1;
        }
        
        .event-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .event-description {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* تحسينات الألعاب */
        .games-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .games-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
        }
        
        .game-card {
            background: var(--gray-100);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .game-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .game-content {
            padding: 1rem;
        }
        
        .game-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .game-description {
            font-size: 0.9rem;
            color: var(--gray-600);
            margin-bottom: 1rem;
        }
        
        .game-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--gray-600);
        }
        
        .game-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .game-rating i {
            color: var(--warning);
        }

        /* تحسينات الدورات التعليمية */
        .courses-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .courses-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
        }
        
        .course-card {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .course-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }
        
        .course-content {
            padding: 1.5rem;
        }
        
        .course-category {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .course-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .course-description {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        
        .course-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .course-instructor {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .instructor-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gray-300);
        }
        
        .course-progress {
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--gray-600);
            margin-top: 0.5rem;
        }

        /* تحسينات الملفات */
        .files-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .files-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .files-toolbar {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .files-content {
            padding: 1.5rem;
        }
        
        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .file-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .file-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .file-icon {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gray-100);
            color: var(--primary);
            font-size: 2.5rem;
        }
        
        .file-content {
            padding: 1rem;
        }
        
        .file-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .file-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        /* تحسينات المهام */
        .tasks-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .tasks-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .tasks-content {
            padding: 1.5rem;
        }
        
        .task-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .filter-btn {
            padding: 0.5rem 1rem;
            background: var(--gray-100);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .filter-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .tasks-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .task-item:hover {
            background: var(--gray-100);
        }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .task-checkbox.checked {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .task-description {
            color: var(--gray-600);
            font-size: 0.9rem;
        }
        
        .task-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: var(--gray-600);
            margin-top: 0.5rem;
        }
        
        .task-priority {
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .priority-high {
            background: var(--danger);
            color: white;
        }
        
        .priority-medium {
            background: var(--warning);
            color: var(--dark);
        }
        
        .priority-low {
            background: var(--success);
            color: white;
        }
        
        .task-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* تحسينات المجموعات */
        .groups-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .groups-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
        }
        
        .group-card {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }
        
        .group-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .group-cover {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .group-content {
            padding: 1.5rem;
        }
        
        .group-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .group-description {
            color: var(--gray-600);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .group-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .group-members {
            display: flex;
            align-items: center;
        }
        
        .member-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gray-300);
            margin-right: -10px;
            border: 2px solid white;
        }
        
        .member-avatar:first-child {
            margin-right: 0;
        }
        
        .group-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* تحسينات القنوات */
        .channels-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .channels-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .channels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
        }
        
        .channel-card {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }
        
        .channel-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .channel-cover {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .channel-content {
            padding: 1.5rem;
        }
        
        .channel-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .channel-description {
            color: var(--gray-600);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .channel-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .channel-subscribers {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .channel-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* تحسينات لوحة إدارة المستخدمين */
        .admin-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .admin-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: var(--gray-100);
        }
        
        .admin-tab-btn {
            padding: 1rem 2rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }
        
        .admin-tab-btn.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            background: white;
        }
        
        .admin-panels {
            padding: 2rem;
        }
        
        .admin-tab-panel {
            display: none;
        }
        
        .admin-tab-panel.active {
            display: block;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .admin-table th,
        .admin-table td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-table th {
            background: var(--gray-100);
            font-weight: 600;
            color: var(--dark);
        }
        
        .user-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            padding: 0.5rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
        }
        
        .action-btn.edit {
            background: var(--info);
            color: white;
        }
        
        .action-btn.ban {
            background: var(--warning);
            color: white;
        }
        
        .action-btn.delete {
            background: var(--danger);
            color: white;
        }

        /* تحسينات الاستجابة للشاشات المختلفة */
        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .chat-container {
                grid-template-columns: 300px 1fr;
            }
        }
        
        @media (max-width: 992px) {
            .header-content {
                padding: 0 1rem;
            }
            
            .nav {
                gap: 0.25rem;
            }
            
            .nav-item {
                padding: 0.5rem 0.75rem;
                font-size: 0.9rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .feature-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .chat-container {
                grid-template-columns: 1fr;
                height: 80vh;
            }
            
            .chat-sidebar {
                display: none;
            }
            
            .chat-sidebar.active {
                display: flex;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                height: auto;
                padding: 1rem;
            }
            
            .logo {
                margin-bottom: 0.5rem;
            }
            
            .nav {
                order: 3;
                width: 100%;
                justify-content: center;
                margin-top: 1rem;
            }
            
            .user-info {
                margin-right: auto;
            }
            
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .settings-tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                padding: 1rem;
                border-bottom: 1px solid var(--border);
                border-left: 3px solid transparent;
            }
            
            .tab-btn.active {
                border-left-color: var(--primary);
                border-bottom: 1px solid var(--border);
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .quick-actions-bar {
                left: 10px;
                bottom: 70px;
            }
            
            .floating-action-btn {
                left: 10px;
                bottom: 10px;
            }
        }
        
        @media (max-width: 576px) {
            .auth-card {
                padding: 2rem 1.5rem;
            }
            
            .main-content {
                padding: 0.5rem;
            }
            
            .hero-section {
                padding: 2rem 0;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .stories-carousel {
                gap: 0.75rem;
            }
            
            .story-user {
                min-width: 70px;
            }
            
            .story-avatar {
                width: 60px;
                height: 60px;
            }
            
            .photos-grid,
            .files-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .games-grid,
            .courses-grid,
            .groups-grid,
            .channels-grid {
                grid-template-columns: 1fr;
            }
        }

        /* تحسينات التحميل */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .btn.loading {
            color: transparent;
            pointer-events: none;
        }
        
        .btn.loading::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        /* تحسينات الرسائل */
        .message {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: var(--border-radius);
            max-width: 80%;
            animation: messageIn 0.3s ease-out;
        }
        
        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message.sent {
            background: var(--primary);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 0;
        }
        
        .message.received {
            background: var(--gray-100);
            color: var(--dark);
            margin-right: auto;
            border-bottom-left-radius: 0;
        }
        
        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 0.5rem;
            text-align: right;
        }
        
        .message.received .message-time {
            text-align: left;
        }

        /* تحسينات النمط الداكن */
        .dark-mode {
            background: var(--gray-900);
            color: var(--gray-100);
        }
        
        .dark-mode .header {
            background: rgba(45, 55, 72, 0.95);
            color: white;
            border-bottom-color: var(--gray-700);
        }
        
        .dark-mode .header.scrolled {
            background: rgba(45, 55, 72, 0.98);
        }
        
        .dark-mode .nav-item {
            color: var(--gray-300);
        }
        
        .dark-mode .nav-item:hover {
            color: white;
        }
        
        .dark-mode .user-info {
            background: var(--gray-800);
            color: white;
            border-color: var(--gray-700);
        }
        
        .dark-mode .user-info:hover {
            background: var(--gray-700);
        }
        
        .dark-mode .content-card,
        .dark-mode .feature-card,
        .dark-mode .auth-card,
        .dark-mode .stat-card,
        .dark-mode .chat-container,
        .dark-mode .stories-container,
        .dark-mode .settings-container,
        .dark-mode .photos-container,
        .dark-mode .calendar-container,
        .dark-mode .games-container,
        .dark-mode .courses-container,
        .dark-mode .files-container,
        .dark-mode .tasks-container,
        .dark-mode .groups-container,
        .dark-mode .channels-container {
            background: var(--gray-800);
            color: var(--gray-100);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode .form-group input {
            background: var(--gray-700);
            border-color: var(--gray-600);
            color: var(--gray-100);
        }
        
        .dark-mode .form-group input:focus {
            border-color: var(--primary);
        }
        
        .dark-mode .border,
        .dark-mode .chat-sidebar,
        .dark-mode .chat-header,
        .dark-mode .chat-search,
        .dark-mode .chat-input-container,
        .dark-mode .stories-header,
        .dark-mode .settings-header,
        .dark-mode .settings-tabs,
        .dark-mode .tab-panel,
        .dark-mode .photos-header,
        .dark-mode .calendar-header,
        .dark-mode .games-header,
        .dark-mode .courses-header,
        .dark-mode .files-header,
        .dark-mode .files-toolbar,
        .dark-mode .tasks-header,
        .dark-mode .groups-header,
        .dark-mode .channels-header {
            border-color: var(--gray-700);
        }
        
        .dark-mode .settings-tabs {
            background: var(--gray-700);
        }
        
        .dark-mode .tab-btn.active {
            background: var(--gray-800);
        }
        
        .dark-mode .quick-actions-bar {
            background: var(--gray-800);
            color: var(--gray-100);
        }
        
        .dark-mode .quick-action:hover {
            background: var(--gray-700);
        }
        
        .dark-mode .message.received {
            background: var(--gray-700);
            color: var(--gray-100);
        }
        
        .dark-mode .story-card,
        .dark-mode .game-card,
        .dark-mode .file-card,
        .dark-mode .task-item {
            background: var(--gray-700);
        }
        
        .dark-mode .task-item:hover {
            background: var(--gray-600);
        }
        
        .dark-mode .filter-btn {
            background: var(--gray-700);
            color: var(--gray-100);
        }
        
        .dark-mode .filter-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .dark-mode .file-icon {
            background: var(--gray-700);
        }
        
        .dark-mode .task-checkbox {
            border-color: var(--gray-600);
        }
        
        .dark-mode ::-webkit-scrollbar-track {
            background: var(--gray-800);
        }
        
        .dark-mode ::-webkit-scrollbar-thumb {
            background: var(--gray-600);
        }
        
        .dark-mode ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-500);
        }
    </style>
</head>
<body>
    <!-- شاشة الترحيب -->
    <div id="welcomeScreen" class="welcome-screen">
        <div class="welcome-content">
            <div class="welcome-logo">
                <div class="logo-icon large">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h1>المنصة التعليمية المتطورة</h1>
                <p>نظام إدارة متكامل للتعليم والتواصل</p>
            </div>
            
            <div class="welcome-features">
                <div class="feature">
                    <i class="fas fa-comments"></i>
                    <span>دردشة فورية</span>
                </div>
                <div class="feature">
                    <i class="fas fa-users"></i>
                    <span>مجموعات تعليمية</span>
                </div>
                <div class="feature">
                    <i class="fas fa-book"></i>
                    <span>دورات تعليمية</span>
                </div>
                <div class="feature">
                    <i class="fas fa-calendar-alt"></i>
                    <span>تقويم فعاليات</span>
                </div>
            </div>
            
            <button id="enterApp" class="btn btn-primary btn-lg">
                <i class="fas fa-play"></i> دخول إلى المنصة
            </button>
        </div>
    </div>

    <!-- حالة الاتصال -->
    <div id="connectionStatus" class="connection-status">
        <i class="fas fa-wifi"></i> متصل بالإنترنت
    </div>

    <!-- إشعار التحديث -->
    <div id="updateNotification" class="update-notification">
        <div class="update-content">
            <i class="fas fa-sync-alt fa-spin"></i>
            <div class="update-info">
                <strong>تحديث جديد متاح</strong>
                <span>يتم تحديث المنصة، يرجى الانتظار...</span>
            </div>
        </div>
        <button class="btn btn-sm btn-outline" id="dismissUpdate">تجاهل</button>
    </div>

    <!-- الهيدر -->
    <header class="header" id="header">
        <div class="header-content">
            <a href="#" class="logo" id="homeLink">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <div class="logo-text">المنصة التعليمية</div>
                    <div class="logo-subtitle">نظام الإدارة المتكامل</div>
                </div>
            </a>
            
            <nav class="nav">
                <a href="#" class="nav-item hidden" data-page="dashboard">
                    <i class="fas fa-home"></i> الرئيسية
                </a>
                <a href="#" class="nav-item hidden" data-page="chat">
                    <i class="fas fa-comments"></i> الدردشة
                    <span class="nav-item-badge">3</span>
                </a>
                <a href="#" class="nav-item hidden" data-page="stories">
                    <i class="fas fa-history"></i> القصص
                </a>
                <a href="#" class="nav-item hidden" data-page="groups">
                    <i class="fas fa-users"></i> المجموعات
                </a>
                <a href="#" class="nav-item hidden" data-page="channels">
                    <i class="fas fa-broadcast-tower"></i> القنوات
                </a>
                <a href="#" class="nav-item hidden" data-page="courses">
                    <i class="fas fa-book"></i> الدورات التعليمية
                </a>
                <a href="#" class="nav-item hidden" data-page="calendar">
                    <i class="fas fa-calendar-alt"></i> التقويم
                </a>
                <a href="#" class="nav-item hidden" data-page="games">
                    <i class="fas fa-gamepad"></i> الألعاب
                </a>
                <a href="#" class="nav-item hidden" data-page="tasks">
                    <i class="fas fa-tasks"></i> المهام
                </a>
                <a href="#" class="nav-item hidden" data-page="files">
                    <i class="fas fa-folder"></i> الملفات
                </a>
                <a href="#" class="nav-item hidden" data-page="photos">
                    <i class="fas fa-images"></i> الصور المرسلة
                </a>
                <a href="#" class="nav-item hidden" data-page="settings">
                    <i class="fas fa-cog"></i> الإعدادات
                </a>
                <a href="#" class="nav-item hidden" data-page="admin" id="adminLink">
                    <i class="fas fa-user-shield"></i> الإدارة
                </a>
                <a href="#" class="nav-item" id="loginLink" data-page="login">
                    <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                </a>
                <a href="#" class="nav-item" id="registerLink" data-page="register">
                    <i class="fas fa-user-plus"></i> إنشاء حساب
                </a>
                <a href="#" class="nav-item hidden" id="logoutLink">
                    <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
                </a>
            </nav>
            
            <div class="user-info hidden" id="userInfo">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <div class="user-name" id="userName">مستخدم</div>
                    <div class="user-role" id="userRole">زائر</div>
                </div>
            </div>
        </div>
    </header>

    <!-- المحتوى الرئيسي -->
    <main class="main-content">
        <!-- صفحة تسجيل الدخول -->
        <div id="loginPage" class="page active">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h2>تسجيل الدخول</h2>
                        <p>أدخل رقم هاتفك وكلمة المرور للوصول إلى حسابك</p>
                    </div>
                    
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginPhone">رقم الهاتف السعودي</label>
                            <input type="tel" id="loginPhone" name="phone" placeholder="5XXXXXXXX" pattern="5[0-9]{8}" required>
                            <small class="form-text">يجب أن يبدأ الرقم بـ 5 ويتكون من 9 أرقام</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">كلمة المرور</label>
                            <input type="password" id="loginPassword" name="password" placeholder="أدخل كلمة المرور" required>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-block" id="loginBtn">
                            <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                        </button>
                    </form>
                    
                    <div class="auth-footer">
                        <p>ليس لديك حساب؟ <a href="#" id="goToRegister">إنشاء حساب جديد</a></p>
                        <p class="mt-2">حساب الآدمن الافتراضي: <strong>500000000</strong> / <strong>77007700</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة إنشاء حساب -->
        <div id="registerPage" class="page">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h2>إنشاء حساب جديد</h2>
                        <p>املأ البيانات التالية لإنشاء حساب جديد</p>
                    </div>
                    
                    <form id="registerForm">
                        <div class="form-group">
                            <label for="registerName">اسم المستخدم</label>
                            <input type="text" id="registerName" name="name" placeholder="أدخل اسمك الكامل" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="registerPhone">رقم الهاتف السعودي</label>
                            <input type="tel" id="registerPhone" name="phone" placeholder="5XXXXXXXX" pattern="5[0-9]{8}" required>
                            <small class="form-text">يجب أن يبدأ الرقم بـ 5 ويتكون من 9 أرقام</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="registerUniversity">الجامعة</label>
                            <select id="registerUniversity" name="university" required>
                                <option value="">اختر الجامعة</option>
                                <option value="فهد">فهد</option>
                                <option value="الباحة">الباحة</option>
                                <option value="مقرن">مقرن</option>
                                <option value="نورة">نورة</option>
                                <option value="أخرى">أخرى</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="registerMajor">التخصص</label>
                            <select id="registerMajor" name="major" required>
                                <option value="">اختر التخصص</option>
                                <option value="حساب آلي">حساب آلي</option>
                                <option value="أمن سيبراني">أمن سيبراني</option>
                                <option value="إدارة أعمال">إدارة أعمال</option>
                                <option value="إدارة مكتبية">إدارة مكتبية</option>
                                <option value="إدارة مستشفيات">إدارة مستشفيات</option>
                                <option value="إدارة تنفيذية">إدارة تنفيذية</option>
                                <option value="سكرتارية">سكرتارية</option>
                                <option value="موارد بشرية">موارد بشرية</option>
                                <option value="الصحة والسلامة">الصحة والسلامة</option>
                                <option value="التسويق">التسويق</option>
                                <option value="البرمجة">البرمجة</option>
                                <option value="المحاسبة">المحاسبة</option>
                                <option value="أخرى">أخرى</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="registerPassword">كلمة المرور</label>
                            <input type="password" id="registerPassword" name="password" placeholder="أدخل كلمة المرور" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="registerConfirmPassword">تأكيد كلمة المرور</label>
                            <input type="password" id="registerConfirmPassword" name="confirmPassword" placeholder="أعد إدخال كلمة المرور" required>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-block" id="registerBtn">
                            <i class="fas fa-user-plus"></i> إنشاء حساب
                        </button>
                    </form>
                    
                    <div class="auth-footer">
                        <p>لديك حساب بالفعل؟ <a href="#" id="goToLogin">تسجيل الدخول</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة الرئيسية -->
        <div id="dashboardPage" class="page">
            <div class="hero-section">
                <h1 class="hero-title">مرحباً بك في المنصة التعليمية المتطورة</h1>
                <p class="hero-description">نظام متكامل يوفر لك تجربة تعليمية وتواصلية فريدة مع زملائك ومعلميك</p>
                
                <div class="hero-actions">
                    <button class="btn btn-primary btn-lg" data-page="courses">
                        <i class="fas fa-book"></i> استكشاف الدورات
                    </button>
                    <button class="btn btn-outline btn-lg" data-page="chat">
                        <i class="fas fa-comments"></i> بدء محادثة
                    </button>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stat-info">
                        <h3>12</h3>
                        <p>الدورات النشطة</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3>48</h3>
                        <p>الطلاب النشطين</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="stat-info">
                        <h3>23</h3>
                        <p>المحادثات النشطة</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-info">
                        <h3>7</h3>
                        <p>المهام المعلقة</p>
                    </div>
                </div>
            </div>
            
            <div class="content-grid">
                <div class="content-card">
                    <h3>النشاط الأخير</h3>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-comment"></i>
                            </div>
                            <div class="activity-content">
                                <p>أحمد علق على منشورك</p>
                                <div class="activity-time">منذ 5 دقائق</div>
                            </div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="activity-content">
                                <p>تم إضافة دورة جديدة: تطوير الويب</p>
                                <div class="activity-time">منذ ساعة</div>
                            </div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="activity-content">
                                <p>أنشأت مجموعة جديدة: فريق التطوير</p>
                                <div class="activity-time">منذ 3 ساعات</div>
                            </div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-calendar"></i>
                            </div>
                            <div class="activity-content">
                                <p>لديك اجتماع غداً الساعة 10 صباحاً</p>
                                <div class="activity-time">منذ 5 ساعات</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="content-card">
                    <h3>المستخدمون النشطون</h3>
                    <div class="users-list">
                        <div class="user-list-item">
                            <div class="user-status"></div>
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">أحمد محمد</div>
                                <div class="user-role">طالب</div>
                            </div>
                        </div>
                        
                        <div class="user-list-item">
                            <div class="user-status"></div>
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">سارة عبدالله</div>
                                <div class="user-role">معلمة</div>
                            </div>
                        </div>
                        
                        <div class="user-list-item">
                            <div class="user-status offline"></div>
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">خالد سعيد</div>
                                <div class="user-role">طالب</div>
                            </div>
                        </div>
                        
                        <div class="user-list-item">
                            <div class="user-status"></div>
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">فاطمة علي</div>
                                <div class="user-role">طالبة</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة الدردشة -->
        <div id="chatPage" class="page">
            <div class="chat-container">
                <div class="chat-sidebar">
                    <div class="chat-header">
                        <h3>المحادثات</h3>
                        <button class="btn btn-sm btn-primary">
                            <i class="fas fa-plus"></i> جديد
                        </button>
                    </div>
                    
                    <div class="chat-search">
                        <input type="text" placeholder="بحث في المحادثات...">
                    </div>
                    
                    <div class="conversations-list">
                        <!-- سيتم ملء المحادثات ديناميكياً -->
                    </div>
                </div>
                
                <div class="chat-main">
                    <div class="chat-header">
                        <h3>المحادثة</h3>
                        <div class="chat-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-phone"></i>
                            </button>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-video"></i>
                            </button>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-info-circle"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="chatMessages">
                        <!-- سيتم ملء الرسائل ديناميكياً -->
                    </div>
                    
                    <div class="chat-input-container">
                        <div class="chat-input-tools">
                            <button class="chat-tool-btn">
                                <i class="fas fa-smile"></i>
                            </button>
                            <button class="chat-tool-btn">
                                <i class="fas fa-paperclip"></i>
                            </button>
                            <button class="chat-tool-btn">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        
                        <input type="text" placeholder="اكتب رسالتك هنا..." id="chatInput">
                        
                        <button class="btn btn-primary" id="sendMessage">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة القصص -->
        <div id="storiesPage" class="page">
            <div class="stories-container">
                <div class="stories-header">
                    <h3>القصص</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> إضافة قصة
                    </button>
                </div>
                
                <div class="stories-feed">
                    <div class="stories-carousel">
                        <!-- سيتم ملء القصص ديناميكياً -->
                    </div>
                    
                    <div class="stories-grid">
                        <!-- سيتم ملء القصص ديناميكياً -->
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة المجموعات -->
        <div id="groupsPage" class="page">
            <div class="groups-container">
                <div class="groups-header">
                    <h3>المجموعات</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> إنشاء مجموعة
                    </button>
                </div>
                
                <div class="groups-grid">
                    <!-- سيتم ملء المجموعات ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- صفحة القنوات -->
        <div id="channelsPage" class="page">
            <div class="channels-container">
                <div class="channels-header">
                    <h3>القنوات</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> إنشاء قناة
                    </button>
                </div>
                
                <div class="channels-grid">
                    <!-- سيتم ملء القنوات ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- صفحة الدورات التعليمية -->
        <div id="coursesPage" class="page">
            <div class="courses-container">
                <div class="courses-header">
                    <h3>الدورات التعليمية</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> دورة جديدة
                    </button>
                </div>
                
                <div class="courses-grid">
                    <!-- سيتم ملء الدورات ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- صفحة التقويم -->
        <div id="calendarPage" class="page">
            <div class="calendar-container">
                <div class="calendar-header">
                    <h3>التقويم</h3>
                    <div class="calendar-nav">
                        <button class="btn btn-sm btn-outline">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button class="btn btn-sm btn-outline" id="todayBtn">اليوم</button>
                        <button class="btn btn-sm btn-outline">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                </div>
                
                <div class="calendar-grid">
                    <div class="calendar-month" id="currentMonth">شهر 2023</div>
                    
                    <div class="calendar-weekdays">
                        <div>الأحد</div>
                        <div>الاثنين</div>
                        <div>الثلاثاء</div>
                        <div>الأربعاء</div>
                        <div>الخميس</div>
                        <div>الجمعة</div>
                        <div>السبت</div>
                    </div>
                    
                    <div class="calendar-days" id="calendarDays">
                        <!-- سيتم ملء الأيام ديناميكياً -->
                    </div>
                    
                    <div class="calendar-events">
                        <h4>الأحداث القادمة</h4>
                        <!-- سيتم ملء الأحداث ديناميكياً -->
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة الألعاب -->
        <div id="gamesPage" class="page">
            <div class="games-container">
                <div class="games-header">
                    <h3>الألعاب التعليمية</h3>
                </div>
                
                <div class="games-grid">
                    <!-- سيتم ملء الألعاب ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- صفحة المهام -->
        <div id="tasksPage" class="page">
            <div class="tasks-container">
                <div class="tasks-header">
                    <h3>المهام</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> مهمة جديدة
                    </button>
                </div>
                
                <div class="tasks-content">
                    <div class="task-filters">
                        <button class="filter-btn active">الكل</button>
                        <button class="filter-btn">المكتملة</button>
                        <button class="filter-btn">غير المكتملة</button>
                        <button class="filter-btn">عالية الأولوية</button>
                    </div>
                    
                    <div class="tasks-list">
                        <!-- سيتم ملء المهام ديناميكياً -->
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة الملفات -->
        <div id="filesPage" class="page">
            <div class="files-container">
                <div class="files-header">
                    <h3>الملفات</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-upload"></i> رفع ملف
                    </button>
                </div>
                
                <div class="files-toolbar">
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-list"></i>
                    </button>
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-sort"></i> ترتيب
                    </button>
                </div>
                
                <div class="files-content">
                    <div class="files-grid">
                        <!-- سيتم ملء الملفات ديناميكياً -->
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة الصور المرسلة -->
        <div id="photosPage" class="page">
            <div class="photos-container">
                <div class="photos-header">
                    <h3>الصور المرسلة</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> تحديث
                    </button>
                </div>
                
                <div class="photos-grid" id="photosGrid">
                    <!-- سيتم ملء الصور ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- صفحة الإعدادات -->
        <div id="settingsPage" class="page">
            <div class="settings-container">
                <div class="settings-header">
                    <h3>الإعدادات</h3>
                </div>
                
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="profile">الملف الشخصي</button>
                    <button class="tab-btn" data-tab="privacy">الخصوصية</button>
                    <button class="tab-btn" data-tab="notifications">الإشعارات</button>
                    <button class="tab-btn" data-tab="appearance">المظهر</button>
                    <button class="tab-btn" data-tab="security">الأمان</button>
                </div>
                
                <div class="settings-panels">
                    <div class="tab-panel active" id="profilePanel">
                        <div class="profile-settings">
                            <div class="profile-header">
                                <div class="profile-avatar">
                                    <div class="avatar-preview">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <button class="btn btn-sm btn-outline">تغيير الصورة</button>
                                </div>
                                
                                <div class="profile-info">
                                    <h4 id="profileName">اسم المستخدم</h4>
                                    <p id="profilePhone">رقم الهاتف</p>
                                    <p id="profileRole">الدور</p>
                                </div>
                            </div>
                            
                            <div class="settings-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="firstName">الاسم الأول</label>
                                        <input type="text" id="firstName" value="مستخدم">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="lastName">اسم العائلة</label>
                                        <input type="text" id="lastName" value="المنصة">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">البريد الإلكتروني</label>
                                    <input type="email" id="email" placeholder="أدخل بريدك الإلكتروني">
                                </div>
                                
                                <div class="form-group">
                                    <label for="bio">نبذة عنك</label>
                                    <textarea id="bio" rows="4" placeholder="اكتب نبذة عنك..."></textarea>
                                </div>
                                
                                <button class="btn btn-primary">حفظ التغييرات</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="privacyPanel">
                        <div class="privacy-options">
                            <div class="privacy-option">
                                <div class="option-info">
                                    <h4>الحساب الخاص</h4>
                                    <p>جعل حسابك خاصاً بحيث لا يمكن للآخرين رؤية معلوماتك</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="privacy-option">
                                <div class="option-info">
                                    <h4>إظهار حالة الاتصال</h4>
                                    <p>السماح للآخرين برؤية ما إذا كنت متصلاً بالإنترنت أم لا</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="privacy-option">
                                <div class="option-info">
                                    <h4>السماح بإرسال الرسائل</h4>
                                    <p>السماح للآخرين بإرسال رسائل مباشرة إليك</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="privacy-option">
                                <div class="option-info">
                                    <h4>السماح بإضافتك إلى المجموعات</h4>
                                    <p>السماح للآخرين بإضافتك إلى المجموعات دون الحاجة إلى موافقتك</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="notificationsPanel">
                        <div class="notification-options">
                            <div class="notification-option">
                                <div class="option-info">
                                    <h4>إشعارات الدردشة</h4>
                                    <p>تلقي إشعارات عند وصول رسائل جديدة</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="notification-option">
                                <div class="option-info">
                                    <h4>إشعارات المجموعات</h4>
                                    <p>تلقي إشعارات عند وجود نشاط في مجموعاتك</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="notification-option">
                                <div class="option-info">
                                    <h4>إشعارات الدورات</h4>
                                    <p>تلقي إشعارات حول تحديثات ومهام الدورات</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="notification-option">
                                <div class="option-info">
                                    <h4>إشعارات البريد الإلكتروني</h4>
                                    <p>تلقي إشعارات عبر البريد الإلكتروني</p>
                                </div>
                                
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="appearancePanel">
                        <div class="appearance-options">
                            <div class="appearance-option">
                                <h4>المظهر</h4>
                                <p>اختر المظهر الذي تفضله للمنصة</p>
                                
                                <div class="theme-selector">
                                    <div class="theme-option active" data-theme="light">
                                        <div class="theme-preview light-theme"></div>
                                        <span>فاتح</span>
                                    </div>
                                    
                                    <div class="theme-option" data-theme="dark">
                                        <div class="theme-preview dark-theme"></div>
                                        <span>داكن</span>
                                    </div>
                                    
                                    <div class="theme-option" data-theme="auto">
                                        <div class="theme-preview auto-theme"></div>
                                        <span>تلقائي</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="appearance-option">
                                <h4>خلفية المنصة</h4>
                                <p>اختر الخلفية التي تفضلها للمنصة</p>
                                
                                <div class="background-selector">
                                    <div class="background-option active" data-background="gradient">
                                        <div class="background-preview bg-gradient"></div>
                                        <span>تدرج لوني</span>
                                    </div>
                                    
                                    <div class="background-option" data-background="solid">
                                        <div class="background-preview bg-solid"></div>
                                        <span>لون موحد</span>
                                    </div>
                                    
                                    <div class="background-option" data-background="pattern">
                                        <div class="background-preview bg-pattern"></div>
                                        <span>نمط</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="securityPanel">
                        <div class="settings-form">
                            <div class="form-group">
                                <label for="currentPassword">كلمة المرور الحالية</label>
                                <input type="password" id="currentPassword" placeholder="أدخل كلمة المرور الحالية">
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">كلمة المرور الجديدة</label>
                                <input type="password" id="newPassword" placeholder="أدخل كلمة المرور الجديدة">
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">تأكيد كلمة المرور الجديدة</label>
                                <input type="password" id="confirmPassword" placeholder="أكد كلمة المرور الجديدة">
                            </div>
                            
                            <button class="btn btn-primary">تغيير كلمة المرور</button>
                            
                            <div class="auth-footer" style="margin-top: 2rem;">
                                <h4>جلسات التسجيل</h4>
                                <p>يمكنك رؤية وإدارة جلسات تسجيل الدخول النشطة على أجهزتك.</p>
                                <button class="btn btn-outline">إدارة الجلسات</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة إدارة المستخدمين -->
        <div id="adminPage" class="page">
            <div class="admin-container">
                <div class="admin-header">
                    <h3>لوحة إدارة المستخدمين</h3>
                    <p>إدارة المستخدمين والإعدادات العامة للنظام</p>
                </div>
                
                <div class="admin-tabs">
                    <button class="admin-tab-btn active" data-tab="users">المستخدمين</button>
                    <button class="admin-tab-btn" data-tab="reports">التقارير</button>
                    <button class="admin-tab-btn" data-tab="system">إعدادات النظام</button>
                </div>
                
                <div class="admin-panels">
                    <div class="admin-tab-panel active" id="usersPanel">
                        <div class="admin-toolbar">
                            <div class="search-box">
                                <input type="text" placeholder="بحث في المستخدمين...">
                                <i class="fas fa-search"></i>
                            </div>
                            <button class="btn btn-primary">
                                <i class="fas fa-plus"></i> إضافة مستخدم
                            </button>
                        </div>
                        
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>اسم المستخدم</th>
                                    <th>رقم الهاتف</th>
                                    <th>الجامعة</th>
                                    <th>التخصص</th>
                                    <th>الدور</th>
                                    <th>الحالة</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- سيتم ملء المستخدمين ديناميكياً -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="admin-tab-panel" id="reportsPanel">
                        <div class="content-card">
                            <h3>تقارير النظام</h3>
                            <p>هنا يمكنك عرض التقارير والإحصائيات حول استخدام النظام.</p>
                            <!-- سيتم إضافة التقارير لاحقاً -->
                        </div>
                    </div>
                    
                    <div class="admin-tab-panel" id="systemPanel">
                        <div class="settings-form">
                            <h3>إعدادات النظام العامة</h3>
                            
                            <div class="form-group">
                                <label for="systemName">اسم النظام</label>
                                <input type="text" id="systemName" value="المنصة التعليمية المتطورة">
                            </div>
                            
                            <div class="form-group">
                                <label for="systemDescription">وصف النظام</label>
                                <textarea id="systemDescription" rows="3">نظام إدارة متكامل للتعليم والتواصل</textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="maxFileSize">الحد الأقصى لحجم الملف (MB)</label>
                                <input type="number" id="maxFileSize" value="50" min="1" max="100">
                            </div>
                            
                            <div class="form-group">
                                <label for="sessionTimeout">مهلة الجلسة (دقائق)</label>
                                <input type="number" id="sessionTimeout" value="60" min="15" max="480">
                            </div>
                            
                            <div class="form-group">
                                <label class="switch">
                                    <input type="checkbox" id="allowRegistrations" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">السماح بالتسجيلات الجديدة</span>
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label class="switch">
                                    <input type="checkbox" id="maintenanceMode">
                                    <span class="slider"></span>
                                    <span class="switch-label">وضع الصيانة</span>
                                </label>
                            </div>
                            
                            <button class="btn btn-primary">حفظ إعدادات النظام</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- شريط الأدوات السريع -->
    <div class="quick-actions-bar" id="quickActions">
        <div class="quick-action" data-page="chat">
            <i class="fas fa-comments"></i>
            <span>الدردشة</span>
        </div>
        <div class="quick-action" data-page="courses">
            <i class="fas fa-book"></i>
            <span>الدورات</span>
        </div>
        <div class="quick-action" data-page="tasks">
            <i class="fas fa-tasks"></i>
            <span>المهام</span>
        </div>
        <div class="quick-action" data-page="calendar">
            <i class="fas fa-calendar-alt"></i>
            <span>التقويم</span>
        </div>
    </div>

    <!-- الزر العائم -->
    <button class="floating-action-btn" id="floatingActionBtn">
        <i class="fas fa-plus"></i>
    </button>

    <script>
        // بيانات التطبيق
        const appData = {
            currentUser: null,
            isLoggedIn: false,
            socket: null,
            currentPage: 'login',
            theme: 'light',
            background: 'gradient',
            users: []
        };

        // تهيئة التطبيق عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            checkAuthentication();
            initializeSocket();
        });

        // تهيئة التطبيق
        function initializeApp() {
            // تحميل الإعدادات المحفوظة
            loadSettings();
            
            // تطبيق المظهر
            applyTheme(appData.theme);
            applyBackground(appData.background);
            
            // إعداد مراقبة الاتصال بالإنترنت
            setupConnectionMonitoring();
            
            // إعداد تأثيرات التمرير على الهيدر
            setupScrollEffects();
            
            // تحميل بيانات المستخدمين (للعرض فقط)
            loadSampleUsers();
        }

        // إعداد مستمعي الأحداث
        function setupEventListeners() {
            // أحداث التنقل بين الصفحات
            document.querySelectorAll('.nav-item[data-page], .quick-action, .hero-actions button').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    if (page) {
                        navigateToPage(page);
                    }
                });
            });
            
            // رابط الرئيسية
            document.getElementById('homeLink').addEventListener('click', function(e) {
                e.preventDefault();
                if (appData.isLoggedIn) {
                    navigateToPage('dashboard');
                } else {
                    navigateToPage('login');
                }
            });
            
            // روابط تسجيل الدخول وإنشاء حساب
            document.getElementById('goToRegister').addEventListener('click', function(e) {
                e.preventDefault();
                navigateToPage('register');
            });
            
            document.getElementById('goToLogin').addEventListener('click', function(e) {
                e.preventDefault();
                navigateToPage('login');
            });
            
            // زر دخول التطبيق
            document.getElementById('enterApp').addEventListener('click', function() {
                document.getElementById('welcomeScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('welcomeScreen').style.display = 'none';
                }, 500);
            });
            
            // نموذج تسجيل الدخول
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });
            
            // نموذج إنشاء حساب
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleRegister();
            });
            
            // إرسال الرسائل في الدردشة
            document.getElementById('sendMessage').addEventListener('click', sendMessage);
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // الأزرار العائمة
            document.getElementById('floatingActionBtn').addEventListener('click', toggleQuickActions);
            
            // تبويبات الإعدادات
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchSettingsTab(tabId);
                });
            });
            
            // تبويبات الإدارة
            document.querySelectorAll('.admin-tab-btn').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchAdminTab(tabId);
                });
            });
            
            // خيارات المظهر
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    switchTheme(theme);
                });
            });
            
            // خيارات الخلفية
            document.querySelectorAll('.background-option').forEach(option => {
                option.addEventListener('click', function() {
                    const background = this.getAttribute('data-background');
                    switchBackground(background);
                });
            });
            
            // زر اليوم في التقويم
            document.getElementById('todayBtn').addEventListener('click', showTodayCalendar);
            
            // زر تجاهل التحديث
            document.getElementById('dismissUpdate').addEventListener('click', function() {
                document.getElementById('updateNotification').classList.remove('active');
            });
        }

        // التحقق من المصادقة
        function checkAuthentication() {
            const token = localStorage.getItem('authToken');
            const userData = localStorage.getItem('userData');
            
            if (token && userData) {
                try {
                    appData.currentUser = JSON.parse(userData);
                    appData.isLoggedIn = true;
                    showAuthenticatedUI();
                    navigateToPage('dashboard');
                } catch (e) {
                    console.error('Error parsing user data:', e);
                    logout();
                }
            } else {
                showLoginUI();
            }
        }

        // معالجة تسجيل الدخول
        function handleLogin() {
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');
            
            // التحقق من صحة رقم الهاتف
            if (!/^5[0-9]{8}$/.test(phone)) {
                showMessage('يرجى إدخال رقم هاتف سعودي صحيح يبدأ بـ 5 ويتكون من 9 أرقام', 'error');
                return;
            }
            
            // التحقق من إدخال كلمة المرور
            if (!password) {
                showMessage('يرجى إدخال كلمة المرور', 'error');
                return;
            }
            
            // عرض حالة التحميل
            loginBtn.innerHTML = '<div class="loading"></div>';
            loginBtn.classList.add('loading');
            
            // محاكاة اتصال بالسيرفر
            setTimeout(() => {
                // في التطبيق الحقيقي، سيتم إرسال طلب إلى السيرفر
                // هنا نقوم بمحاكاة الاستجابة
                if (phone === '500000000' && password === '77007700') {
                    // تسجيل الدخول كآدمن
                    const userData = {
                        id: 1,
                        phone: phone,
                        name: 'مدير النظام',
                        role: 'admin',
                        university: 'النظام',
                        major: 'إدارة النظام',
                        avatar: null
                    };
                    
                    loginSuccess(userData);
                } else if (password === '123456') {
                    // تسجيل الدخول كمستخدم عادي (لأغراض العرض)
                    const userData = {
                        id: Date.now(),
                        phone: phone,
                        name: `مستخدم ${phone}`,
                        role: 'user',
                        university: 'فهد',
                        major: 'البرمجة',
                        avatar: null
                    };
                    
                    loginSuccess(userData);
                } else {
                    // فشل تسجيل الدخول
                    loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> تسجيل الدخول';
                    loginBtn.classList.remove('loading');
                    showMessage('رقم الهاتف أو كلمة المرور غير صحيحة', 'error');
                }
            }, 1500);
        }

        // معالجة إنشاء حساب
        function handleRegister() {
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const university = document.getElementById('registerUniversity').value;
            const major = document.getElementById('registerMajor').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const registerBtn = document.getElementById('registerBtn');
            
            // التحقق من البيانات
            if (!name || !phone || !university || !major || !password || !confirmPassword) {
                showMessage('يرجى ملء جميع الحقول', 'error');
                return;
            }
            
            // التحقق من صحة رقم الهاتف
            if (!/^5[0-9]{8}$/.test(phone)) {
                showMessage('يرجى إدخال رقم هاتف سعودي صحيح يبدأ بـ 5 ويتكون من 9 أرقام', 'error');
                return;
            }
            
            // التحقق من تطابق كلمات المرور
            if (password !== confirmPassword) {
                showMessage('كلمات المرور غير متطابقة', 'error');
                return;
            }
            
            // التحقق من قوة كلمة المرور
            if (password.length < 6) {
                showMessage('كلمة المرور يجب أن تكون 6 أحرف على الأقل', 'error');
                return;
            }
            
            // عرض حالة التحميل
            registerBtn.innerHTML = '<div class="loading"></div>';
            registerBtn.classList.add('loading');
            
            // محاكاة اتصال بالسيرفر
            setTimeout(() => {
                // في التطبيق الحقيقي، سيتم إرسال طلب إلى السيرفر
                // هنا نقوم بمحاكاة الاستجابة
                const userData = {
                    id: Date.now(),
                    phone: phone,
                    name: name,
                    role: 'user',
                    university: university,
                    major: major,
                    avatar: null
                };
                
                // إضافة المستخدم إلى القائمة المحلية
                appData.users.push(userData);
                
                loginSuccess(userData);
                
                // إعادة تعيين النموذج
                document.getElementById('registerForm').reset();
            }, 1500);
        }

        // نجاح تسجيل الدخول
        function loginSuccess(userData) {
            appData.currentUser = userData;
            appData.isLoggedIn = true;
            
            // حفظ بيانات المستخدم محلياً
            localStorage.setItem('authToken', 'mock-token-' + Date.now());
            localStorage.setItem('userData', JSON.stringify(userData));
            
            // تحديث واجهة المستخدم
            showAuthenticatedUI();
            
            // الانتقال إلى الصفحة الرئيسية
            navigateToPage('dashboard');
            
            // إعادة تعيين نموذج تسجيل الدخول
            document.getElementById('loginForm').reset();
            
            // إظهار رسالة نجاح
            showMessage(`مرحباً بعودتك، ${userData.name}!`, 'success');
        }

        // تسجيل الخروج
        function logout() {
            appData.currentUser = null;
            appData.isLoggedIn = false;
            
            // مسح بيانات المستخدم المحلية
            localStorage.removeItem('authToken');
            localStorage.removeItem('userData');
            
            // إغلاق الاتصال بالسيرفر
            if (appData.socket) {
                appData.socket.disconnect();
            }
            
            // تحديث واجهة المستخدم
            showLoginUI();
            
            // الانتقال إلى صفحة تسجيل الدخول
            navigateToPage('login');
            
            // إظهار رسالة
            showMessage('تم تسجيل الخروج بنجاح', 'info');
        }

        // عرض واجهة تسجيل الدخول
        function showLoginUI() {
            // إخفاء عناصر المستخدم المصادق
            document.querySelectorAll('.nav-item[data-page]').forEach(item => {
                item.classList.add('hidden');
            });
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('logoutLink').classList.add('hidden');
            document.getElementById('adminLink').classList.add('hidden');
            
            // إظهار عناصر الزائر
            document.getElementById('loginLink').classList.remove('hidden');
            document.getElementById('registerLink').classList.remove('hidden');
            
            // إخفاء جميع الصفحات ما عدا صفحة تسجيل الدخول
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
        }

        // عرض واجهة المستخدم بعد المصادقة
        function showAuthenticatedUI() {
            // إخفاء عناصر الزائر
            document.getElementById('loginLink').classList.add('hidden');
            document.getElementById('registerLink').classList.add('hidden');
            
            // إظهار عناصر المستخدم المصادق
            document.querySelectorAll('.nav-item[data-page]').forEach(item => {
                item.classList.remove('hidden');
            });
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('logoutLink').classList.remove('hidden');
            
            // إظهار رابط الإدارة فقط للمدير
            if (appData.currentUser.role === 'admin') {
                document.getElementById('adminLink').classList.remove('hidden');
            }
            
            // تحديث معلومات المستخدم
            document.getElementById('userName').textContent = appData.currentUser.name;
            document.getElementById('userRole').textContent = appData.currentUser.role === 'admin' ? 'مدير النظام' : 'مستخدم';
            
            document.getElementById('profileName').textContent = appData.currentUser.name;
            document.getElementById('profilePhone').textContent = appData.currentUser.phone;
            document.getElementById('profileRole').textContent = appData.currentUser.role === 'admin' ? 'مدير النظام' : 'مستخدم';
        }

        // التنقل بين الصفحات
        function navigateToPage(pageId) {
            // إذا لم يكن المستخدم مسجلاً الدخول، إعادة التوجيه إلى صفحة تسجيل الدخول
            if (!appData.isLoggedIn && pageId !== 'login' && pageId !== 'register') {
                pageId = 'login';
            }
            
            // إخفاء جميع الصفحات
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // إزالة النشاط من عناصر التنقل
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // إظهار الصفحة المطلوبة
            const targetPage = document.getElementById(pageId + 'Page');
            if (targetPage) {
                targetPage.classList.add('active');
                
                // تحديث العنصر النشط في التنقل
                const navItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
                if (navItem) {
                    navItem.classList.add('active');
                }
                
                // تحديث الصفحة الحالية
                appData.currentPage = pageId;
                
                // تحميل محتوى الصفحة ديناميكياً إذا لزم الأمر
                loadPageContent(pageId);
            }
            
            // إغلاق شريط الأدوات السريع
            document.getElementById('quickActions').classList.remove('active');
        }

        // تحميل محتوى الصفحة ديناميكياً
        function loadPageContent(pageId) {
            switch (pageId) {
                case 'dashboard':
                    loadDashboardContent();
                    break;
                case 'chat':
                    loadChatContent();
                    break;
                case 'stories':
                    loadStoriesContent();
                    break;
                case 'groups':
                    loadGroupsContent();
                    break;
                case 'channels':
                    loadChannelsContent();
                    break;
                case 'courses':
                    loadCoursesContent();
                    break;
                case 'calendar':
                    loadCalendarContent();
                    break;
                case 'games':
                    loadGamesContent();
                    break;
                case 'tasks':
                    loadTasksContent();
                    break;
                case 'files':
                    loadFilesContent();
                    break;
                case 'photos':
                    loadPhotosContent();
                    break;
                case 'admin':
                    loadAdminContent();
                    break;
            }
        }

        // تحميل محتوى لوحة التحكم
        function loadDashboardContent() {
            // يمكن إضافة محتوى ديناميكي هنا
        }

        // تحميل محتوى الدردشة
        function loadChatContent() {
            const conversationsList = document.querySelector('.conversations-list');
            const chatMessages = document.getElementById('chatMessages');
            
            // بيانات تجريبية للمحادثات
            const conversations = [
                { id: 1, name: 'أحمد محمد', lastMessage: 'مرحباً، كيف حالك؟', unread: 2, time: '10:30' },
                { id: 2, name: 'سارة عبدالله', lastMessage: 'شكراً على المساعدة', unread: 0, time: '09:15' },
                { id: 3, name: 'فريق التطوير', lastMessage: 'لدينا اجتماع غداً', unread: 5, time: 'أمس' },
                { id: 4, name: 'خالد سعيد', lastMessage: 'هل انتهيت من المهمة؟', unread: 0, time: 'الجمعة' }
            ];
            
            // بيانات تجريبية للرسائل
            const messages = [
                { id: 1, sender: 'أحمد محمد', text: 'مرحباً، كيف حالك؟', time: '10:30', sent: false },
                { id: 2, sender: 'أنت', text: 'أهلاً أحمد، أنا بخير. شكراً لسؤالك!', time: '10:32', sent: true },
                { id: 3, sender: 'أحمد محمد', text: 'هل يمكنك مساعدتي في مشروع الرياضيات؟', time: '10:33', sent: false },
                { id: 4, sender: 'أنت', text: 'بالطبع، متى تريد أن نبدأ؟', time: '10:35', sent: true }
            ];
            
            // عرض المحادثات
            conversationsList.innerHTML = '';
            conversations.forEach(conversation => {
                const conversationEl = document.createElement('div');
                conversationEl.className = 'user-list-item';
                conversationEl.innerHTML = `
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">${conversation.name}</div>
                        <div class="user-role">${conversation.lastMessage}</div>
                    </div>
                    <div class="activity-time">${conversation.time}</div>
                    ${conversation.unread > 0 ? `<span class="nav-item-badge">${conversation.unread}</span>` : ''}
                `;
                conversationsList.appendChild(conversationEl);
            });
            
            // عرض الرسائل
            chatMessages.innerHTML = '';
            messages.forEach(message => {
                const messageEl = document.createElement('div');
                messageEl.className = `message ${message.sent ? 'sent' : 'received'}`;
                messageEl.innerHTML = `
                    <div class="message-text">${message.text}</div>
                    <div class="message-time">${message.time}</div>
                `;
                chatMessages.appendChild(messageEl);
            });
            
            // التمرير إلى آخر رسالة
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // إرسال رسالة
        function sendMessage() {
            const chatInput = document.getElementById('chatInput');
            const messageText = chatInput.value.trim();
            
            if (messageText) {
                const chatMessages = document.getElementById('chatMessages');
                
                // إنشاء عنصر الرسالة
                const messageEl = document.createElement('div');
                messageEl.className = 'message sent';
                messageEl.innerHTML = `
                    <div class="message-text">${messageText}</div>
                    <div class="message-time">الآن</div>
                `;
                
                // إضافة الرسالة إلى الدردشة
                chatMessages.appendChild(messageEl);
                
                // مسح حقل الإدخال
                chatInput.value = '';
                
                // التمرير إلى آخر رسالة
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // محاكاة الرد (في التطبيق الحقيقي، سيتم إرسال الرسالة عبر السيرفر)
                setTimeout(() => {
                    const replyEl = document.createElement('div');
                    replyEl.className = 'message received';
                    replyEl.innerHTML = `
                        <div class="message-text">شكراً على رسالتك! سأرد عليك قريباً.</div>
                        <div class="message-time">الآن</div>
                    `;
                    chatMessages.appendChild(replyEl);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
            }
        }

        // تحميل محتوى القصص
        function loadStoriesContent() {
            const storiesCarousel = document.querySelector('.stories-carousel');
            const storiesGrid = document.querySelector('.stories-grid');
            
            // بيانات تجريبية للقصص
            const stories = [
                { id: 1, user: 'أحمد محمد', hasStory: true, time: '2 ساعة' },
                { id: 2, user: 'سارة عبدالله', hasStory: true, time: '5 ساعة' },
                { id: 3, user: 'خالد سعيد', hasStory: false, time: 'يوم' },
                { id: 4, user: 'فاطمة علي', hasStory: true, time: '3 ساعة' },
                { id: 5, user: 'محمد حسن', hasStory: false, time: 'يوم' }
            ];
            
            // عرض القصص في المتصفح
            storiesCarousel.innerHTML = '';
            stories.forEach(story => {
                const storyEl = document.createElement('div');
                storyEl.className = 'story-user';
                storyEl.innerHTML = `
                    <div class="story-avatar ${story.hasStory ? 'has-story' : ''}">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="story-username">${story.user}</div>
                `;
                storiesCarousel.appendChild(storyEl);
            });
            
            // عرض القصص في الشبكة
            storiesGrid.innerHTML = '';
            stories.forEach(story => {
                const storyCard = document.createElement('div');
                storyCard.className = 'story-card';
                storyCard.innerHTML = `
                    <img src="https://via.placeholder.com/300x200/4a7bc8/ffffff?text=قصة+${story.user}" alt="قصة ${story.user}" class="story-media">
                    <div class="story-content">
                        <div class="story-user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">${story.user}</div>
                            </div>
                        </div>
                        <div class="story-caption">هذه قصة رائعة شاركها ${story.user}</div>
                        <div class="story-meta">
                            <span>${story.time}</span>
                            <span><i class="fas fa-eye"></i> 125</span>
                        </div>
                    </div>
                `;
                storiesGrid.appendChild(storyCard);
            });
        }

        // تحميل محتوى المجموعات
        function loadGroupsContent() {
            const groupsGrid = document.querySelector('.groups-grid');
            
            // بيانات تجريبية للمجموعات
            const groups = [
                { id: 1, name: 'فريق التطوير', description: 'مجموعة لمطوري البرمجيات', members: 15, posts: 42 },
                { id: 2, name: 'طلاب الرياضيات', description: 'لمناقشة مسائل الرياضيات', members: 28, posts: 67 },
                { id: 3, name: 'نادي القراءة', description: 'لمشاركة الكتب والمراجعات', members: 32, posts: 89 },
                { id: 4, name: 'متطوعي المجتمع', description: 'للمبادرات التطوعية', members: 45, posts: 112 }
            ];
            
            // عرض المجموعات
            groupsGrid.innerHTML = '';
            groups.forEach(group => {
                const groupCard = document.createElement('div');
                groupCard.className = 'group-card';
                groupCard.innerHTML = `
                    <img src="https://via.placeholder.com/300x120/667eea/ffffff?text=${group.name}" alt="${group.name}" class="group-cover">
                    <div class="group-content">
                        <h4 class="group-title">${group.name}</h4>
                        <p class="group-description">${group.description}</p>
                        <div class="group-meta">
                            <div class="group-members">
                                <div class="member-avatar"></div>
                                <div class="member-avatar"></div>
                                <div class="member-avatar"></div>
                                <span>+${group.members - 3}</span>
                            </div>
                            <div class="group-stats">
                                <span><i class="fas fa-users"></i> ${group.members}</span>
                                <span><i class="fas fa-comment"></i> ${group.posts}</span>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="btn btn-primary btn-sm">انضم</button>
                            <button class="btn btn-outline btn-sm">عرض</button>
                        </div>
                    </div>
                `;
                groupsGrid.appendChild(groupCard);
            });
        }

        // تحميل محتوى القنوات
        function loadChannelsContent() {
            const channelsGrid = document.querySelector('.channels-grid');
            
            // بيانات تجريبية للقنوات
            const channels = [
                { id: 1, name: 'أخبار التكنولوجيا', description: 'أحدث أخبار التكنولوجيا والابتكارات', subscribers: 1250, videos: 42 },
                { id: 2, name: 'تعلم البرمجة', description: 'دروس برمجة للمبتدئين والمحترفين', subscribers: 3200, videos: 89 },
                { id: 3, name: 'العلوم والفضاء', description: 'اكتشافات علمية وأخبار الفضاء', subscribers: 1850, videos: 67 },
                { id: 4, name: 'التنمية الشخصية', description: 'نصائح لتحسين الذات وتطوير المهارات', subscribers: 2750, videos: 54 }
            ];
            
            // عرض القنوات
            channelsGrid.innerHTML = '';
            channels.forEach(channel => {
                const channelCard = document.createElement('div');
                channelCard.className = 'channel-card';
                channelCard.innerHTML = `
                    <img src="https://via.placeholder.com/300x120/f093fb/ffffff?text=${channel.name}" alt="${channel.name}" class="channel-cover">
                    <div class="channel-content">
                        <h4 class="channel-title">${channel.name}</h4>
                        <p class="channel-description">${channel.description}</p>
                        <div class="channel-meta">
                            <div class="channel-subscribers">
                                <i class="fas fa-users"></i>
                                <span>${channel.subscribers} مشترك</span>
                            </div>
                            <div class="channel-stats">
                                <span><i class="fas fa-play-circle"></i> ${channel.videos} فيديو</span>
                            </div>
                        </div>
                        <div class="channel-actions">
                            <button class="btn btn-primary btn-sm">اشترك</button>
                            <button class="btn btn-outline btn-sm">عرض</button>
                        </div>
                    </div>
                `;
                channelsGrid.appendChild(channelCard);
            });
        }

        // تحميل محتوى الدورات التعليمية
        function loadCoursesContent() {
            const coursesGrid = document.querySelector('.courses-grid');
            
            // بيانات تجريبية للدورات
            const courses = [
                { id: 1, title: 'تعلم HTML و CSS', category: 'تطوير الويب', instructor: 'أحمد محمد', progress: 75, duration: '12 ساعة', students: 1250 },
                { id: 2, title: 'JavaScript للمبتدئين', category: 'تطوير الويب', instructor: 'سارة عبدالله', progress: 30, duration: '16 ساعة', students: 890 },
                { id: 3, title: 'تعلم Python', category: 'برمجة', instructor: 'خالد سعيد', progress: 0, duration: '20 ساعة', students: 2100 },
                { id: 4, title: 'تصميم UX/UI', category: 'تصميم', instructor: 'فاطمة علي', progress: 100, duration: '14 ساعة', students: 750 }
            ];
            
            // عرض الدورات
            coursesGrid.innerHTML = '';
            courses.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'course-card';
                courseCard.innerHTML = `
                    <img src="https://via.placeholder.com/300x160/2c5aa0/ffffff?text=${course.title}" alt="${course.title}" class="course-image">
                    <div class="course-content">
                        <span class="course-category">${course.category}</span>
                        <h4 class="course-title">${course.title}</h4>
                        <p class="course-description">دورة شاملة لتعلم ${course.title} من الصفر إلى الاحتراف</p>
                        <div class="course-meta">
                            <div class="course-instructor">
                                <div class="instructor-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <span>${course.instructor}</span>
                            </div>
                            <div class="course-duration">
                                <i class="fas fa-clock"></i>
                                <span>${course.duration}</span>
                            </div>
                        </div>
                        ${course.progress > 0 ? `
                        <div class="course-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${course.progress}%"></div>
                            </div>
                            <div class="progress-text">
                                <span>التقدم</span>
                                <span>${course.progress}%</span>
                            </div>
                        </div>
                        ` : ''}
                        <div class="course-actions">
                            ${course.progress === 0 ? 
                                '<button class="btn btn-primary btn-block">بدء الدورة</button>' : 
                                course.progress === 100 ? 
                                '<button class="btn btn-outline btn-block">إعادة الدورة</button>' : 
                                '<button class="btn btn-primary btn-block">استئناف الدورة</button>'
                            }
                        </div>
                    </div>
                `;
                coursesGrid.appendChild(courseCard);
            });
        }

        // تحميل محتوى التقويم
        function loadCalendarContent() {
            const currentMonthEl = document.getElementById('currentMonth');
            const calendarDaysEl = document.getElementById('calendarDays');
            
            // الحصول على التاريخ الحالي
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            // عرض الشهر والسنة الحاليين
            const monthNames = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];
            currentMonthEl.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            // إنشاء التقويم
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const startingDay = firstDay.getDay();
            const monthLength = lastDay.getDate();
            
            // مسح التقويم الحالي
            calendarDaysEl.innerHTML = '';
            
            // إضافة الأيام الفارغة في بداية الشهر
            for (let i = 0; i < startingDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                calendarDaysEl.appendChild(emptyDay);
            }
            
            // إضافة أيام الشهر
            for (let i = 1; i <= monthLength; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                
                // تحديد إذا كان اليوم الحالي
                if (i === now.getDate() && currentMonth === now.getMonth() && currentYear === now.getFullYear()) {
                    day.classList.add('today');
                }
                
                // إضافة حدث عشوائي لبعض الأيام
                if (Math.random() > 0.7) {
                    day.classList.add('has-event');
                }
                
                calendarDaysEl.appendChild(day);
            }
        }

        // عرض تاريخ اليوم في التقويم
        function showTodayCalendar() {
            loadCalendarContent();
        }

        // تحميل محتوى الألعاب
        function loadGamesContent() {
            const gamesGrid = document.querySelector('.games-grid');
            
            // بيانات تجريبية للألعاب
            const games = [
                { id: 1, name: 'كلمات متقاطعة', description: 'لعبة ذكاء وتحدي للمفردات', rating: 4.5, players: 1250 },
                { id: 2, name: 'سودوكو', description: 'لعبة أرقام يابانية شهيرة', rating: 4.7, players: 890 },
                { id: 3, name: 'ألغاز رياضية', description: 'تحدي مهاراتك في الرياضيات', rating: 4.3, players: 670 },
                { id: 4, name: 'تعلم مع الألوان', description: 'لعبة تعليمية للأطفال', rating: 4.8, players: 2100 }
            ];
            
            // عرض الألعاب
            gamesGrid.innerHTML = '';
            games.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                gameCard.innerHTML = `
                    <img src="https://via.placeholder.com/250x150/ff6b6b/ffffff?text=${game.name}" alt="${game.name}" class="game-image">
                    <div class="game-content">
                        <h4 class="game-title">${game.name}</h4>
                        <p class="game-description">${game.description}</p>
                        <div class="game-meta">
                            <div class="game-rating">
                                <i class="fas fa-star"></i>
                                <span>${game.rating}</span>
                            </div>
                            <div class="game-players">
                                <i class="fas fa-users"></i>
                                <span>${game.players}</span>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-block" style="margin-top: 1rem;">العب الآن</button>
                    </div>
                `;
                gamesGrid.appendChild(gameCard);
            });
        }

        // تحميل محتوى المهام
        function loadTasksContent() {
            const tasksList = document.querySelector('.tasks-list');
            
            // بيانات تجريبية للمهام
            const tasks = [
                { id: 1, title: 'إنهاء تقرير الرياضيات', description: 'كتابة التقرير النهائي لمشروع الرياضيات', priority: 'high', dueDate: 'غداً', completed: false },
                { id: 2, title: 'مراجعة درس البرمجة', description: 'مراجعة الدروس من 1 إلى 5 لدورة JavaScript', priority: 'medium', dueDate: 'بعد غد', completed: false },
                { id: 3, title: 'تحضير عرض التخرج', description: 'إعداد العرض النهائي لمشروع التخرج', priority: 'high', dueDate: 'الأسبوع القادم', completed: false },
                { id: 4, title: 'قراءة كتاب الأدب', description: 'إنهاء قراءة الفصول من 5 إلى 8', priority: 'low', dueDate: 'خلال أسبوع', completed: true }
            ];
            
            // عرض المهام
            tasksList.innerHTML = '';
            tasks.forEach(task => {
                const taskItem = document.createElement('div');
                taskItem.className = 'task-item';
                taskItem.innerHTML = `
                    <div class="task-checkbox ${task.completed ? 'checked' : ''}">
                        ${task.completed ? '<i class="fas fa-check"></i>' : ''}
                    </div>
                    <div class="task-content">
                        <div class="task-title">${task.title}</div>
                        <div class="task-description">${task.description}</div>
                        <div class="task-meta">
                            <span class="task-priority priority-${task.priority}">${task.priority === 'high' ? 'عالي' : task.priority === 'medium' ? 'متوسط' : 'منخفض'}</span>
                            <span><i class="fas fa-calendar"></i> ${task.dueDate}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="btn btn-sm btn-outline"><i class="fas fa-edit"></i></button>
                        <button class="btn btn-sm btn-outline"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                tasksList.appendChild(taskItem);
            });
        }

        // تحميل محتوى الملفات
        function loadFilesContent() {
            const filesGrid = document.querySelector('.files-grid');
            
            // بيانات تجريبية للملفات
            const files = [
                { id: 1, name: 'تقرير الرياضيات.pdf', type: 'pdf', size: '2.4 MB', date: '2023-10-15' },
                { id: 2, name: 'عرض التخرج.pptx', type: 'presentation', size: '5.7 MB', date: '2023-10-12' },
                { id: 3, name: 'ملاحظات المحاضرة.docx', type: 'document', size: '1.2 MB', date: '2023-10-10' },
                { id: 4, name: 'بيانات البحث.xlsx', type: 'spreadsheet', size: '3.1 MB', date: '2023-10-08' },
                { id: 5, name: 'صورة المشروع.jpg', type: 'image', size: '4.5 MB', date: '2023-10-05' },
                { id: 6, name: 'ملف الصوت.m4a', type: 'audio', size: '8.2 MB', date: '2023-10-01' }
            ];
            
            // رموز الأنواع
            const typeIcons = {
                'pdf': 'fas fa-file-pdf',
                'document': 'fas fa-file-word',
                'spreadsheet': 'fas fa-file-excel',
                'presentation': 'fas fa-file-powerpoint',
                'image': 'fas fa-file-image',
                'audio': 'fas fa-file-audio',
                'video': 'fas fa-file-video',
                'archive': 'fas fa-file-archive',
                'default': 'fas fa-file'
            };
            
            // ألوان الأنواع
            const typeColors = {
                'pdf': '#f56565',
                'document': '#4299e1',
                'spreadsheet': '#48bb78',
                'presentation': '#ed8936',
                'image': '#9f7aea',
                'audio': '#ed64a6',
                'video': '#4c51bf',
                'archive': '#718096',
                'default': '#a0aec0'
            };
            
            // عرض الملفات
            filesGrid.innerHTML = '';
            files.forEach(file => {
                const fileType = file.type in typeIcons ? file.type : 'default';
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                fileCard.innerHTML = `
                    <div class="file-icon" style="color: ${typeColors[fileType]}">
                        <i class="${typeIcons[fileType]}"></i>
                    </div>
                    <div class="file-content">
                        <div class="file-name">${file.name}</div>
                        <div class="file-meta">
                            <span>${file.size}</span>
                            <span>${file.date}</span>
                        </div>
                    </div>
                `;
                filesGrid.appendChild(fileCard);
            });
        }

        // تحميل محتوى الصور المرسلة
        function loadPhotosContent() {
            const photosGrid = document.getElementById('photosGrid');
            
            // بيانات تجريبية للصور
            const photos = [
                { id: 1, sender: 'أحمد محمد', date: '2023-10-15', url: 'https://via.placeholder.com/200/4a7bc8/ffffff?text=صورة+1' },
                { id: 2, sender: 'سارة عبدالله', date: '2023-10-14', url: 'https://via.placeholder.com/200/667eea/ffffff?text=صورة+2' },
                { id: 3, sender: 'خالد سعيد', date: '2023-10-13', url: 'https://via.placeholder.com/200/764ba2/ffffff?text=صورة+3' },
                { id: 4, sender: 'فاطمة علي', date: '2023-10-12', url: 'https://via.placeholder.com/200/f093fb/ffffff?text=صورة+4' },
                { id: 5, sender: 'أحمد محمد', date: '2023-10-11', url: 'https://via.placeholder.com/200/f5576c/ffffff?text=صورة+5' },
                { id: 6, sender: 'سارة عبدالله', date: '2023-10-10', url: 'https://via.placeholder.com/200/ff6b6b/ffffff?text=صورة+6' }
            ];
            
            // عرض الصور
            photosGrid.innerHTML = '';
            photos.forEach(photo => {
                const photoItem = document.createElement('div');
                photoItem.className = 'photo-item';
                photoItem.innerHTML = `
                    <img src="${photo.url}" alt="صورة ${photo.id}">
                    <div class="photo-overlay">
                        <div class="photo-info">
                            <div class="photo-sender">${photo.sender}</div>
                            <div class="photo-date">${photo.date}</div>
                        </div>
                    </div>
                `;
                photosGrid.appendChild(photoItem);
            });
        }

        // تحميل محتوى لوحة الإدارة
        function loadAdminContent() {
            const usersTableBody = document.getElementById('usersTableBody');
            
            // عرض المستخدمين في الجدول
            usersTableBody.innerHTML = '';
            appData.users.forEach(user => {
                const userRow = document.createElement('tr');
                userRow.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.phone}</td>
                    <td>${user.university}</td>
                    <td>${user.major}</td>
                    <td>${user.role === 'admin' ? 'مدير' : 'مستخدم'}</td>
                    <td><span class="user-status"></span> نشط</td>
                    <td>
                        <div class="user-actions">
                            <button class="action-btn edit"><i class="fas fa-edit"></i></button>
                            <button class="action-btn ban"><i class="fas fa-ban"></i></button>
                            <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                `;
                usersTableBody.appendChild(userRow);
            });
        }

        // تحميل بيانات المستخدمين (للعرض فقط)
        function loadSampleUsers() {
            appData.users = [
                { id: 1, phone: '500000000', name: 'مدير النظام', role: 'admin', university: 'النظام', major: 'إدارة النظام', avatar: null },
                { id: 2, phone: '511111111', name: 'أحمد محمد', role: 'user', university: 'فهد', major: 'البرمجة', avatar: null },
                { id: 3, phone: '522222222', name: 'سارة عبدالله', role: 'user', university: 'نورة', major: 'إدارة الأعمال', avatar: null },
                { id: 4, phone: '533333333', name: 'خالد سعيد', role: 'user', university: 'الباحة', major: 'أمن سيبراني', avatar: null },
                { id: 5, phone: '544444444', name: 'فاطمة علي', role: 'user', university: 'مقرن', major: 'المحاسبة', avatar: null }
            ];
        }

        // تبديل تبويبات الإعدادات
        function switchSettingsTab(tabId) {
            // إزالة النشاط من جميع الأزرار
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // إخفاء جميع اللوحات
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // إضافة النشاط للزر المحدد
            document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
            
            // إظهار اللوحة المحددة
            document.getElementById(`${tabId}Panel`).classList.add('active');
        }

        // تبديل تبويبات الإدارة
        function switchAdminTab(tabId) {
            // إزالة النشاط من جميع الأزرار
            document.querySelectorAll('.admin-tab-btn').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // إخفاء جميع اللوحات
            document.querySelectorAll('.admin-tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // إضافة النشاط للزر المحدد
            document.querySelector(`.admin-tab-btn[data-tab="${tabId}"]`).classList.add('active');
            
            // إظهار اللوحة المحددة
            document.getElementById(`${tabId}Panel`).classList.add('active');
        }

        // تبديل المظهر
        function switchTheme(theme) {
            appData.theme = theme;
            applyTheme(theme);
            saveSettings();
            
            // تحديث العناصر النشطة
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`.theme-option[data-theme="${theme}"]`).classList.add('active');
        }

        // تطبيق المظهر
        function applyTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
            } else if (theme === 'light') {
                document.body.classList.remove('dark-mode');
            } else {
                // تلقائي - استخدام تفضيلات النظام
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
        }

        // تبديل الخلفية
        function switchBackground(background) {
            appData.background = background;
            applyBackground(background);
            saveSettings();
            
            // تحديث العناصر النشطة
            document.querySelectorAll('.background-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`.background-option[data-background="${background}"]`).classList.add('active');
        }

        // تطبيق الخلفية
        function applyBackground(background) {
            const body = document.body;
            
            // إزالة جميع فئات الخلفية
            body.classList.remove('bg-gradient', 'bg-solid', 'bg-pattern');
            
            // إضافة فئة الخلفية المحددة
            if (background === 'gradient') {
                body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            } else if (background === 'solid') {
                body.style.background = 'var(--primary)';
            } else if (background === 'pattern') {
                body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%), url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\' viewBox=\'0 0 40 40\'><rect width=\'20\' height=\'20\' fill=\'rgba(255,255,255,0.1)\'/></svg>")';
                body.style.backgroundBlendMode = 'overlay';
            }
        }

        // تبديل شريط الأدوات السريع
        function toggleQuickActions() {
            const quickActions = document.getElementById('quickActions');
            quickActions.classList.toggle('active');
        }

        // إعداد تأثيرات التمرير
        function setupScrollEffects() {
            const header = document.getElementById('header');
            
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
        }

        // إعداد مراقبة الاتصال بالإنترنت
        function setupConnectionMonitoring() {
            const connectionStatus = document.getElementById('connectionStatus');
            
            window.addEventListener('online', function() {
                connectionStatus.innerHTML = '<i class="fas fa-wifi"></i> متصل بالإنترنت';
                connectionStatus.classList.remove('offline', 'reconnecting');
                connectionStatus.style.display = 'flex';
                
                setTimeout(() => {
                    connectionStatus.style.display = 'none';
                }, 3000);
            });
            
            window.addEventListener('offline', function() {
                connectionStatus.innerHTML = '<i class="fas fa-wifi-slash"></i> غير متصل بالإنترنت';
                connectionStatus.classList.add('offline');
                connectionStatus.classList.remove('reconnecting');
                connectionStatus.style.display = 'flex';
            });
            
            // محاكاة إعادة الاتصال
            setInterval(() => {
                if (!navigator.onLine && Math.random() > 0.7) {
                    connectionStatus.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> جاري إعادة الاتصال...';
                    connectionStatus.classList.remove('offline');
                    connectionStatus.classList.add('reconnecting');
                    
                    setTimeout(() => {
                        if (!navigator.onLine) {
                            connectionStatus.innerHTML = '<i class="fas fa-wifi-slash"></i> غير متصل بالإنترنت';
                            connectionStatus.classList.remove('reconnecting');
                            connectionStatus.classList.add('offline');
                        }
                    }, 2000);
                }
            }, 5000);
        }

        // تهيئة اتصال السوكيت
        function initializeSocket() {
            // في التطبيق الحقيقي، سيتم الاتصال بالسيرفر
            // هنا نقوم بمحاكاة الاتصال
            appData.socket = {
                emit: function(event, data) {
                    console.log('Emitting event:', event, data);
                },
                on: function(event, callback) {
                    console.log('Listening for event:', event);
                },
                disconnect: function() {
                    console.log('Disconnected from server');
                }
            };
            
            // محاكاة استقبال الصور من المدير
            setInterval(() => {
                if (appData.isLoggedIn && Math.random() > 0.8) {
                    // محاكاة استقبال صورة جديدة
                    showMessage('تم استلام صورة جديدة من المدير', 'info');
                    
                    // إذا كنا في صفحة الصور، نقوم بتحديث المحتوى
                    if (appData.currentPage === 'photos') {
                        loadPhotosContent();
                    }
                }
            }, 10000);
        }

        // حفظ الإعدادات
        function saveSettings() {
            const settings = {
                theme: appData.theme,
                background: appData.background
            };
            
            localStorage.setItem('appSettings', JSON.stringify(settings));
        }

        // تحميل الإعدادات
        function loadSettings() {
            const savedSettings = localStorage.getItem('appSettings');
            
            if (savedSettings) {
                try {
                    const settings = JSON.parse(savedSettings);
                    appData.theme = settings.theme || 'light';
                    appData.background = settings.background || 'gradient';
                } catch (e) {
                    console.error('Error loading settings:', e);
                }
            }
        }

        // عرض رسالة للمستخدم
        function showMessage(text, type = 'info') {
            // إنشاء عنصر الرسالة
            const messageEl = document.createElement('div');
            messageEl.className = `message ${type === 'error' ? 'sent' : 'received'}`;
            messageEl.style.backgroundColor = type === 'error' ? 'var(--danger)' : type === 'success' ? 'var(--success)' : 'var(--info)';
            messageEl.innerHTML = `
                <div class="message-text">${text}</div>
                <div class="message-time">الآن</div>
            `;
            
            // إضافة الرسالة إلى الدردشة إذا كانت مفتوحة
            if (appData.currentPage === 'chat') {
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.appendChild(messageEl);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            } else {
                // عرض إشعار عائم
                const notification = document.createElement('div');
                notification.className = 'update-notification active';
                notification.style.position = 'fixed';
                notification.style.top = '80px';
                notification.style.left = '50%';
                notification.style.transform = 'translateX(-50%)';
                notification.style.zIndex = '10000';
                notification.style.backgroundColor = type === 'error' ? 'var(--danger)' : type === 'success' ? 'var(--success)' : 'var(--info)';
                notification.style.color = 'white';
                notification.innerHTML = `
                    <div class="update-content">
                        <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                        <div class="update-info">
                            <span>${text}</span>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // إزالة الإشعار بعد 5 ثوانٍ
                setTimeout(() => {
                    notification.remove();
                }, 5000);
            }
        }

        // محاكاة تحديث التطبيق
        function simulateAppUpdate() {
            const updateNotification = document.getElementById('updateNotification');
            updateNotification.classList.add('active');
            
            setTimeout(() => {
                updateNotification.classList.remove('active');
                showMessage('تم تحديث التطبيق بنجاح', 'success');
            }, 3000);
        }

        // محاكاة تحديث عشوائي للتطبيق
        setInterval(() => {
            if (Math.random() > 0.95) {
                simulateAppUpdate();
            }
        }, 60000);
    </script>
</body>
</html>
